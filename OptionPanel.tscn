[gd_scene load_steps=8 format=2]

[ext_resource path="res://assets/NotoSans-Regular.ttf" type="DynamicFontData" id=1]
[ext_resource path="res://scripts/OptionPanel.gd" type="Script" id=2]

[sub_resource type="DynamicFont" id=1]
outline_size = 1
outline_color = Color( 0, 0, 0, 1 )
font_data = ExtResource( 1 )

[sub_resource type="Theme" id=2]
default_font = SubResource( 1 )

[sub_resource type="DynamicFont" id=3]
size = 24
outline_size = 1
outline_color = Color( 0, 0, 0, 1 )
font_data = ExtResource( 1 )

[sub_resource type="GDScript" id=4]
script/source = "extends Label

var fps: float = 0.0
func _draw():
	set_text('FPS: %.0f' % fps)

var last_latency_check := 0.0
func _process(delta):
	fps = Engine.get_frames_per_second()
	update()
"

[sub_resource type="GDScript" id=5]
script/source = "extends Label

var audio_latency: float = 0.0
func _draw():
	set_text('Audio Latency: %.2fms' % (audio_latency*1000))

var last_latency_check := 0.0
func _process(delta):
	last_latency_check += delta
	if last_latency_check > 5.0:
		last_latency_check = 0.0
		audio_latency = AudioServer.get_output_latency()  # Note that on official godot builds this will only work ONCE for PulseAudio
		update()
"

[node name="OptionPanel" type="VBoxContainer"]
margin_right = 269.0
margin_bottom = 234.0
size_flags_horizontal = 3
size_flags_vertical = 3
theme = SubResource( 2 )
script = ExtResource( 2 )
__meta__ = {
"_edit_use_anchors_": false
}

[node name="lbl_fps" type="Label" parent="."]
margin_right = 281.0
margin_bottom = 34.0
custom_fonts/font = SubResource( 3 )
text = "FPS: "
script = SubResource( 4 )
__meta__ = {
"_edit_use_anchors_": false
}

[node name="lbl_audiolatency" type="Label" parent="."]
margin_top = 38.0
margin_right = 281.0
margin_bottom = 61.0
text = "Audio Latency: "
script = SubResource( 5 )
__meta__ = {
"_edit_use_anchors_": false
}

[node name="HBoxContainer" type="HBoxContainer" parent="."]
margin_top = 65.0
margin_right = 281.0
margin_bottom = 105.0

[node name="btn_vsync" type="CheckButton" parent="HBoxContainer"]
margin_right = 124.0
margin_bottom = 40.0
pressed = true
text = "Vsync"
__meta__ = {
"_edit_use_anchors_": false
}

[node name="btn_wakelock" type="CheckButton" parent="HBoxContainer"]
margin_left = 128.0
margin_right = 281.0
margin_bottom = 40.0
pressed = true
text = "Wakelock"
__meta__ = {
"_edit_use_anchors_": false
}

[node name="lbl_subsampling" type="Label" parent="."]
margin_top = 109.0
margin_right = 281.0
margin_bottom = 132.0
size_flags_vertical = 0
text = "Subsampling (X, Y)"
__meta__ = {
"_edit_use_anchors_": false
}

[node name="sl_SSX" type="HSlider" parent="."]
margin_top = 136.0
margin_right = 281.0
margin_bottom = 152.0
size_flags_vertical = 1
min_value = 0.1
max_value = 1.0
step = 0.05
value = 1.0
tick_count = 9
ticks_on_borders = true
__meta__ = {
"_edit_use_anchors_": false
}

[node name="sl_SSY" type="HSlider" parent="."]
margin_top = 156.0
margin_right = 281.0
margin_bottom = 172.0
grow_horizontal = 2
grow_vertical = 2
size_flags_vertical = 1
min_value = 0.1
max_value = 1.0
step = 0.05
value = 1.0
tick_count = 9
ticks_on_borders = true
__meta__ = {
"_edit_use_anchors_": false
}

[node name="lbl_screenfilter" type="Label" parent="."]
margin_top = 176.0
margin_right = 281.0
margin_bottom = 199.0
text = "Screen Filter Opacity"
__meta__ = {
"_edit_use_anchors_": false
}

[node name="sl_screenfilter" type="HSlider" parent="."]
margin_top = 203.0
margin_right = 281.0
margin_bottom = 219.0
max_value = 1.0
step = 0.01
value = 0.2
__meta__ = {
"_edit_use_anchors_": false
}

[node name="lbl_volume" type="Label" parent="."]
margin_top = 223.0
margin_right = 281.0
margin_bottom = 246.0
text = "Main Volume"
__meta__ = {
"_edit_use_anchors_": false
}

[node name="sl_volume" type="HSlider" parent="."]
margin_top = 250.0
margin_right = 281.0
margin_bottom = 266.0
min_value = -40.0
max_value = 0.0
tick_count = 9
ticks_on_borders = true
__meta__ = {
"_edit_use_anchors_": false
}

[node name="hbox_language" type="HBoxContainer" parent="."]
margin_top = 270.0
margin_right = 281.0
margin_bottom = 299.0
custom_constants/separation = 12

[node name="lbl_language" type="Label" parent="hbox_language"]
margin_top = 3.0
margin_right = 75.0
margin_bottom = 26.0
text = "Language"
__meta__ = {
"_edit_use_anchors_": false
}

[node name="btn_language" type="OptionButton" parent="hbox_language"]
margin_left = 87.0
margin_right = 281.0
margin_bottom = 29.0
size_flags_horizontal = 3
text = "Native"
align = 1
items = [ "Native", null, false, 0, null, "Romaji", null, false, 1, null, "English", null, false, 2, null ]
selected = 0
__meta__ = {
"_edit_use_anchors_": false
}

[connection signal="toggled" from="HBoxContainer/btn_vsync" to="." method="_on_btn_vsync_toggled"]
[connection signal="toggled" from="HBoxContainer/btn_wakelock" to="." method="_on_btn_wakelock_toggled"]
[connection signal="value_changed" from="sl_SSX" to="." method="_on_sl_SSX_value_changed"]
[connection signal="value_changed" from="sl_SSY" to="." method="_on_sl_SSY_value_changed"]
[connection signal="value_changed" from="sl_screenfilter" to="." method="_on_sl_screenfilter_value_changed"]
[connection signal="value_changed" from="sl_volume" to="." method="_on_sl_volume_value_changed"]
[connection signal="item_selected" from="hbox_language/btn_language" to="." method="_on_btn_language_item_selected"]
